# ?? DIAGRAMAS DE CASOS DE USO - RunaTalento

## 1?? DIAGRAMA GENERAL DEL SISTEMA

```
???????????????????????????????????????????????????????????????????????????????
?                         SISTEMA RUNATALENTO                                ?
?                                                                              ?
?  ????????????????         ????????????????         ????????????????        ?
?  ? ADMINISTRADOR?         ?   DOCENTE    ?         ? ESTUDIANTE   ?        ?
?  ????????????????         ????????????????         ????????????????        ?
?         ?                        ?                        ?                 ?
?         ?                        ?                        ?                 ?
?         ???????????????????????????????????????????????????                ?
?         ?             ?          ?          ?             ?                ?
?    ????????????? ????????????? ?????????? ????????????????????????????????
?    ?  Gestionar? ?  Gestionar? ?Crear  ? ?Calificar  ?? Realizar      ?
?    ?  Usuarios ? ?  Cursos   ? ?Activ. ? ? Actividad ?? Actividad     ?
?    ?????????????? ????????????? ????????? ???????????????????????????????
?                                                  ?
?                                                  ???? ? STRATEGY PATTERN
?                                                       (3 estrategias)
?
?  ?????????????????????????????????????????????????????????????????????????
?  ?              ?             ?                                          ?
?  ?????????????????????????????????????????????????????????????????????????
?  ?                                                    ?                  ?
?  ?  ???????????????????????????????  ??????????????????????          ?
?  ?  ?  Otorgar Medallas           ?  ?  Ver Ranking       ?          ?
?  ?  ?  (Solo docente)             ?  ?  (Docente/Student) ?          ?
?  ?  ???????????????????????????????  ??????????????????????          ?
?  ?                                                                    ?
?  ?  ???????????????????????????????????????????????????????????????  ?
?  ?  ?  Actualización Automática (Backend):                        ?  ?
?  ?  ?  • Actualizar Puntaje y Nivel (HIGH COHESION)             ?  ?
?  ?  ?  • Otorgar Incentivos Automáticamente (OBSERVER)          ?  ?
?  ?  ?  • Registrar Eventos en Logs (OBSERVER)                   ?  ?
?  ?  ???????????????????????????????????????????????????????????????  ?
?  ??????????????????????????????????????????????????????????????????????
?
???????????????????????????????????????????????????????????????????????????????
```

---

## 2?? DIAGRAMA DE CASOS DE USO - ADMINISTRADOR

```
                        ???????????????????????
                        ?   ADMINISTRADOR     ?
                        ???????????????????????
                                   ?
                ???????????????????????????????????????
                ?                  ?                  ?
            ??????????     ??????????????     ?????????????
            ?Gestionar?     ? Gestionar  ?     ? Gestionar ?
            ? Usuarios ?     ?  Cursos    ?     ?  Niveles  ?
            ???????????     ??????????????     ?????????????
                ?                  ?                  ?
         ???????????????     ???????????????     ???????????
         ?             ?     ?             ?     ?         ?
    ??????????? ?????????? ???????????? ????? ????????? ???????
    ? Crear   ? ? Editar ? ? Eliminar ? ?...? ?Crear ? ?...  ?
    ? Usuario ? ?Usuario ? ? Usuario  ? ????? ? Nivel? ???????
    ??????????? ?????????? ????????????       ????????

                           ???????????????????
                           ?  Gestionar      ?
                           ?  Medallas e     ?
                           ?  Incentivos     ?
                           ???????????????????
                                    ?
                          ??????????????????????
                          ?                    ?
                      ??????????           ?????????
                      ? Crear  ?           ? Crear ?
                      ? Medalla?           ?Incentiv?
                      ??????????           ?????????
```

---

## 3?? DIAGRAMA DE CASOS DE USO - DOCENTE

```
                        ???????????????????????
                        ?      DOCENTE        ?
                        ???????????????????????
                                   ?
                ???????????????????????????????????????
                ?                  ?                  ?
            ????????????      ????????????       ???????????
            ?  Crear   ?      ?Calificar ?       ? Otorgar ?
            ?Actividades?      ?Actividades?      ? Medallas?
            ????????????      ????????????       ???????????
                                   ?                  ?
                          ?????????????????????  ?????????????
                          ?                   ?  ?           ?
                    ????????????        ????????????    ?????????
                    ? Estrategia?       ? Editar   ?    ?Eliminar?
                    ? Estándar  ?       ? Medalla  ?    ? Medalla?
                    ????????????       ????????????    ??????????
                    ?Bonif?Penal?
                    ????????????
                         ?
                    ????????????????????
                    ? Ver Ranking de   ?
                    ? Desempeño (TOP100)
                    ????????????????????

    Patrón STRATEGY (3 algoritmos) ?
    Patrón FACTORY METHOD ?
    Patrón OBSERVER ?
    Patrón HIGH COHESION ?
```

---

## 4?? DIAGRAMA DE CASOS DE USO - ESTUDIANTE

```
                        ????????????????????
                        ?   ESTUDIANTE     ?
                        ????????????????????
                                 ?
                   ??????????????????????????????
                   ?             ?              ?
            ?????????????    ???????????  ????????????
            ?Mis        ?    ? Realizar?  ?Ver       ?
            ?Actividades?    ?Actividad?  ?Progreso  ?
            ?????????????    ???????????  ????????????
                    ?                         ?
            ??????????????????       ???????????????
            ?                ?       ?             ?
        ?????????    ??????????? ?????????? ??????????
        ?Entregar?    ? Ver Det.? ?Puntaje ? ?Medallas?
        ? Archivo?    ? con     ? ?Total   ? ? Obtens ?
        ??????????    ?DECORATOR? ?????????? ??????????
                      ?(Puntaje ?
                      ?modificado
                      ???????????

        Patrón DECORATOR ?
        Patrón HIGH COHESION ?

                    ????????????????????
                    ? Ver Ranking      ?
                    ? General          ?
                    ????????????????????
```

---

## 5?? FLUJO DE CALIFICACIÓN DETALLADO ?

```
???????????????????????????????????????????????????????????????????????????
?                     FLUJO DE CALIFICACIÓN                              ?
???????????????????????????????????????????????????????????????????????????

INICIO
  ?
  ??? Docente accede a "Calificar Actividades"
  ?
  ??? Selecciona actividad entregada
  ?
  ??? Ingresa:
  ?   ?? Puntaje (0-max)
  ?   ?? Estrategia (Estándar/Bonificación/Penalización)
  ?
  ??? POST /Docente/Calificar
  ?
  ??? DocenteController.Calificar()
  ?   ?
  ?   ??? Validar datos
  ?   ?
  ?   ??? ?? FACTORY METHOD ?
  ?   ?   ??? CalificacionStrategyFactory.CrearEstrategia(tipo)
  ?   ?       ??? Retorna ICalificacionStrategy
  ?   ?           ?? CalificacionEstandarStrategy
  ?   ?           ?? CalificacionConBonificacionStrategy
  ?   ?           ?? CalificacionConPenalizacionStrategy
  ?   ?
  ?   ??? ?? STRATEGY PATTERN ?
  ?   ?   ??? CalificacionBusinessController.ProcesarCalificacion()
  ?   ?       ?? strategy.CalcularPuntaje(max, obtenido, aTiempo)
  ?   ?       ?  ?? Estándar: retorna obtenido
  ?   ?       ?  ?? Bonificación: obtenido += 10% si aTiempo
  ?   ?       ?  ?? Penalización: obtenido -= 20% si NO aTiempo
  ?   ?       ?
  ?   ?       ?? actividadEstudiante.PuntajeObtenido = puntajeFinal
  ?   ?       ?
  ?   ?       ?? ?? OBSERVER PATTERN ?
  ?   ?           ?? notifier.NotificarCalificacion()
  ?   ?               ?? LogCalificacionObserver.OnActividadCalificada()
  ?   ?                   ?? Log: "Actividad calificada..."
  ?   ?
  ?   ??? ?? HIGH COHESION (GRASP) ?
  ?   ?   ?? GamificacionService.ActualizarPuntajeYNivel()
  ?   ?   ?   ?? puntajeTotal += puntajeFinal
  ?   ?   ?   ?? Buscar nivel donde puntos ? [min, max]
  ?   ?   ?   ?? Si cambió nivel ? CambioDeNivel = true
  ?   ?   ?   ?? Retorna ActualizacionGamificacion
  ?   ?   ?
  ?   ?   ?? GamificacionService.OtorgarIncentivosAutomaticos()
  ?   ?       ?? Para cada incentivo:
  ?   ?       ?   ?? Si puntajeTotal >= puntosRequeridos
  ?   ?       ?   ?? Si NO lo tiene ya
  ?   ?       ?   ?? Crear IncentivoEstudiante
  ?   ?       ?? Retorna List<string> nombres incentivos
  ?   ?
  ?   ??? _context.SaveChangesAsync()
  ?   ?   ?? Guardar en BD
  ?   ?
  ?   ??? Construir mensaje de éxito:
  ?       ?? "? Puntaje bonificado: 80 + 8 = 88 pts"
  ?       ?? "?? Subiste de nivel: Bronce ? Plata"
  ?       ?? "?? Incentivos: Medalla de Oro"
  ?
  ??? TempData["Success"] = mensajeExito
  ?
  ??? Redirect CalificarActividades
  ?
  ??? FIN

PATRONES APLICADOS:
  ? STRATEGY (GoF)         - Selecciona algoritmo
  ? FACTORY METHOD (GoF)   - Crea estrategia dinámicamente
  ? OBSERVER (GoF)         - Notifica eventos
  ? CONTROLLER (GRASP)     - Lógica de negocio separada
  ? HIGH COHESION (GRASP)  - Servicios especializados
```

---

## 6?? FLUJO DE ENTREGA DE ACTIVIDAD CON DECORADOR ?

```
???????????????????????????????????????????????????????????????????????????
?                   FLUJO DE ENTREGA ACTIVIDAD                           ?
???????????????????????????????????????????????????????????????????????????

VISTA ACTIVIDAD:
  ?
  ??? Estudiante accede a ActividadesEstudiante/Realizar
  ?
  ??? GET /ActividadesEstudiante/Realizar/{id}
  ?
  ??? Sistema carga Actividad con decoradores:
  ?
  ??? ?? DECORATOR PATTERN ?
  ?   ?
  ?   ?? Propiedad: EsUrgente
  ?   ?   ?? if (FechaLimite - Hoy < 2 días) ? true
  ?   ?       ?? Muestra: ? URGENTE
  ?   ?
  ?   ?? Propiedad: NivelDificultad
  ?   ?   ?? normal      ? sin etiqueta
  ?   ?   ?? dificil     ? ?? DIFÍCIL
  ?   ?   ?? muy_dificil ? ???? MUY DIFÍCIL
  ?   ?
  ?   ?? Propiedad: PuntajeConModificadores
  ?   ?   ?? Base: Puntaje = 100
  ?   ?   ?? Si dificil:     100 * 1.20 = 120
  ?   ?   ?? Si muy_dificil: 100 * 1.35 = 135
  ?   ?   ?? Si urgente:     × 1.15
  ?   ?   ?? Resultado: 100 * 1.35 * 1.15 = 155 pts
  ?   ?
  ?   ?? Propiedad: DescripcionConModificadores
  ?       ?? "???? MUY DIFÍCIL - ? URGENTE - Proyecto Final"
  ?
  ??? VISTA MUESTRA:
  ?   ?
  ?   ?? Título: "???? MUY DIFÍCIL - ? URGENTE"
  ?   ?? Descripción: "Proyecto Final"
  ?   ?? Puntaje normal: ~~100~~ tachado
  ?   ?? Puntaje con modificadores: 155 puntos
  ?   ?
  ?   ?? Detalles de bonificación:
  ?   ?   ?? ?? Bonificación por dificultad: +35%
  ?   ?   ?? ? Bonificación por urgencia: +15%
  ?   ?
  ?   ?? Fecha límite con días restantes
  ?   ?? Botón "Realizar/Entregar"
  ?
  ??? Estudiante carga archivo y confirma entrega
      ?? POST /ActividadesEstudiante/Entregar/{id}
         ?? ActividadEstudiante.FechaEntrega = DateTime.Now

PATRONES APLICADOS:
  ? DECORATOR (GoF) - Añade funcionalidad sin modificar clase original
```

---

## 7?? FLUJO AUTOMÁTICO: OTORGAMIENTO DE INCENTIVOS

```
???????????????????????????????????????????????????????????????????????????
?         OTORGAMIENTO AUTOMÁTICO DE INCENTIVOS (BACKGROUND)             ?
???????????????????????????????????????????????????????????????????????????

TRIGGER:
  ?
  ??? CalificacionBusinessController.Calificar()
  ?
  ??? GamificacionService.ActualizarPuntajeYNivel() completado
  ?
  ??? GamificacionService.OtorgarIncentivosAutomaticos(estudianteId)
      ?
      ??? Obtener lista de incentivos activos:
      ?   ```sql
      ?   SELECT * FROM Incentivo 
      ?   WHERE Activo = 1
      ?   ORDER BY PuntosRequeridos
      ?   ```
      ?
      ??? Para cada incentivo:
      ?   ?
      ?   ?? ¿Estudiante tiene puntos requeridos?
      ?   ? ?? if (estudiante.PuntajeTotal >= incentivo.PuntosRequeridos)
      ?   ?
      ?   ?? ¿Ya tiene el incentivo?
      ?   ? ?? if (!_context.IncentivoEstudiante.Any(...))
      ?   ?
      ?   ?? Si cumple: Crear IncentivoEstudiante
      ?       ?? IdIncentivo
      ?       ?? IdEstudiante
      ?       ?? FechaOtorgado = DateTime.Now
      ?       ?? PuntajeAlObtener = estudiante.PuntajeTotal
      ?
      ??? _context.SaveChangesAsync()
      ?
      ??? Retorna List<string> con nombres de nuevos incentivos
          ?? ["Medalla de Oro", "Bonus Premium"]

EJEMPLO:
  Estudiante acumula 500 puntos:
  ?? Incentivo "Medalla de Plata" (req: 100) ? OBTIENE ?
  ?? Incentivo "Bonus x2" (req: 300)         ? OBTIENE ?
  ?? Incentivo "Premium+" (req: 500)         ? OBTIENE ?

PATRÓN USADO:
  ? HIGH COHESION (GRASP) - Lógica especializada en servicio
  ? OBSERVER (implícito) - Notificación automática al obtener
```

---

## 8?? ACTUALIZACIÓN AUTOMÁTICA DE NIVEL

```
???????????????????????????????????????????????????????????????????????????
?           ACTUALIZACIÓN AUTOMÁTICA DE NIVEL (BACKGROUND)              ?
???????????????????????????????????????????????????????????????????????????

TRIGGER:
  ?
  ??? GamificacionService.ActualizarPuntajeYNivel()
      ?
      ??? Obtener estudiante:
      ?   ApplicationUser estudiante = await _context.Users.FindAsync(id)
      ?
      ??? Guardar nivel anterior:
      ?   int? nivelAnteriorId = estudiante.IdNivel
      ?
      ??? Sumar puntos:
      ?   estudiante.PuntajeTotal += puntosGanados
      ?
      ??? Buscar nuevo nivel:
      ?   ```csharp
      ?   var nuevoNivel = await _context.Nivel
      ?       .Where(n => estudiante.PuntajeTotal >= n.PuntajeMinimo
      ?                && estudiante.PuntajeTotal <= n.PuntajeMaximo)
      ?       .FirstOrDefaultAsync();
      ?   ```
      ?
      ?? Si encontrado:
      ?   estudiante.IdNivel = nuevoNivel.IdNivel
      ?
      ??? _context.SaveChangesAsync()
      ?
      ??? Retorna ActualizacionGamificacion:
          {
            PuntosGanados: 88,
            PuntajeTotalActual: 238,
            NivelAnterior: "Bronce",
            NivelActual: "Plata",
            CambioDeNivel: true
          }

TABLA DE NIVELES EJEMPLO:
  ?????????????????????????????????
  ? Nivel   ? Mínimo   ? Máximo   ?
  ?????????????????????????????????
  ? Bronce  ?    0     ?   100    ?
  ? Plata   ?   101    ?   300    ?
  ? Oro     ?   301    ?   500    ?
  ? Platino ?   501    ?   ?      ?
  ?????????????????????????????????

PATRÓN USADO:
  ? HIGH COHESION (GRASP) - Lógica especializada en servicio
```

---

## 9?? DIAGRAMA DE SECUENCIA: CALIFICACIÓN COMPLETA

```
Docente          DocenteController    CalificacionBusinessController    GamificacionService    BD
  ?                      ?                         ?                            ?              ?
  ?? Calificar ??????????????                        ?                            ?              ?
  ?   (puntaje, estrategia) ?                        ?                            ?              ?
  ?                        ?? Factory.Crear ???    ?                            ?              ?
  ?                        ?   Estrategia ?????    ?                            ?              ?
  ?                        ?                        ?                            ?              ?
  ?                        ?? Procesar ??????????????                            ?              ?
  ?                        ?   Calificación         ?                            ?              ?
  ?                        ?   ?? strategy.Calcular?                            ?              ?
  ?                        ?   ?? notify.Notify    ?                            ?              ?
  ?                        ?   ????????????????????????? ActualizarPuntaje ????????? UPDATE ???
  ?                        ?                        ?   Y Nivel                 ?              ?
  ?                        ?                        ?                            ?              ?
  ?                        ?                        ?      Retorna ???????????????              ?
  ?                        ?                        ?                            ?              ?
  ?                        ?                        ?                   OtorgarIncentivos     ?
  ?                        ?                        ?                            ???? INSERT ?
  ?                        ?                        ?                            ????        ?
  ?                        ???? Resultado ???????????                            ?              ?
  ?                        ?                        ?                            ?              ?
  ? Success Msg ????????????                        ?                            ?              ?
  ?
  ?? Mostrar "? Puntaje bonificado..."

INTERACCIONES:
1. Factory crea estrategia dinámicamente
2. Estrategia calcula según algoritmo
3. Observer registra evento
4. Controller valida y coordina
5. Servicio actualiza BD
6. Incentivos se otorgan automáticamente
```

---

## ?? MATRIZ DE RELACIÓN ENTRE PATRONES

```
?????????????????????????????????????????????????????????????????????
? Patrón/Principio   ? Tipo        ? Ubicación     ? Caso de Uso    ?
?????????????????????????????????????????????????????????????????????
? STRATEGY           ? GoF         ? Services/..   ? CU-010         ?
? FACTORY METHOD     ? GoF         ? Services/..   ? CU-010         ?
? OBSERVER           ? GoF         ? Services/..   ? Automático     ?
? DECORATOR          ? GoF         ? Models/Views  ? CU-009,CU-015  ?
? CONTROLLER         ? GRASP       ? Services/..   ? CU-010         ?
? HIGH COHESION      ? GRASP       ? Services/..   ? CU-010,14,16   ?
?????????????????????????????????????????????????????????????????????

TRABAJANDO JUNTOS EN CU-010 (CALIFICAR):
  1. FACTORY METHOD crea estrategia
  2. STRATEGY aplica algoritmo
  3. OBSERVER notifica eventos
  4. CONTROLLER organiza flujo
  5. HIGH COHESION actualiza datos
  6. DECORATOR calcula puntaje final
```

---

## 1??1?? RESUMEN VISUAL: INTERACCIÓN DE PATRONES

```
                    ???? DOCENTE
                    ?       ?
                    ?       ?? Puntaje: 80
                    ?       ?? Estrategia: Bonificación
                    ?       ?? Entregó a tiempo: Sí
                    ?
                    ?
            ?????????????????????????????????????
            ?  DocenteController.Calificar()    ?
            ?????????????????????????????????????
                         ?
            ???????????????????????????
            ?                         ?
            ?                         ?
    ???????????????????????  ????????????????????
    ? FACTORY METHOD      ?  ? Validar Datos    ?
    ? Crea Estrategia     ?  ? (0-100, etc)     ?
    ???????????????????????  ????????????????????
               ?
               ?
    ???????????????????????????????????????
    ? STRATEGY: Bonificacion              ?
    ? Calcula: 80 + (80*0.10) = 88 pts   ?
    ?????????????????????????????????????
               ?
    ???????????????????????
    ?                     ?
    ?                     ?
??????????????    ????????????????????
? OBSERVER   ?    ? CONTROLLER       ?
? Registra   ?    ? Coordina flujo   ?
? en Logs    ?    ? negocio          ?
??????????????    ????????????????????
                           ?
                           ?
                  ???????????????????????
                  ? HIGH COHESION       ?
                  ? Actualiza Puntos    ?
                  ? Nivel               ?
                  ? Incentivos          ?
                  ???????????????????????
                            ?
                ??????????????????????????
                ?                        ?
                ?                        ?
        ????????????????        ????????????????????
        ?DECORATOR    ?        ?Retorna Mensaje   ?
        ?Calcula Final?        ?de Éxito          ?
        ?155 pts      ?        ?? 88 pts bonif.  ?
        ?(si aplica)  ?        ??? Subió nivel   ?
        ????????????????        ??? Incentivos     ?
                                ????????????????????
```

---

**Versión:** 1.0  
**Fecha:** Diciembre 2024  
**Proyecto:** RunaTalento - Plataforma de Gamificación Académica

---

**Estado:** ? **DIAGRAMAS COMPLETOS**
